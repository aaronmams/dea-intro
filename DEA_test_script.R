#source("U:/R code/DEA/frontier_efficiency_functions.R")
source("te.out.R")
require("Benchmarking")

###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
#PLAIN VANILLA OUTPUT ORIENTED DEA EXAMPLE WITH SOME RANDOM HOSPITAL DATA I FOUND ON THE INTERNET

#===========================================================================================================
#Hospital Data for testing DEA Functions
df <- data.frame(c(567,350,445,220,450,399,156,2314,560,1669),
                 c(2678,1200,1616,1450,890,1660,3102,3456,4000,4500),
                 c(409,90,295,560,195,209,108,877,189,530),
                 c(211,85,186,71,94,100,57,252,310,390))
names(df) <- c("nurse_hours","medical_supply","inpatient","outpatient")

input.names <- c("nurse_hours","medical_supply")
output.names <- c("inpatient","outpatient")


#=======================================================================================================

#=======================================================================================================
#compare output oriented DEA with VRS technology to same model from package "Benchmarking"
mamula.out <- dea.out(data=df,input.names=input.names,output.names=output.names,rts="vrs",slack=F)
#compare to output from package 'Benchmarking'
bm.out <- dea(X=df[,which(colnames(df) %in% input.names)],df[,which(colnames(df) %in% output.names)],
              RTS = "vrs", ORIENTATION = "out", SLACK = FALSE)
#=========================================================================================================
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
#TEST THE OUTPUT ORIENTED DEA WITH SLACK MEASURE

mamula.out <- dea.out(data=df,input.names=input.names, output.names=output.names, rts='crs',slack=T)

bm.out <- dea(X=df[,which(colnames(df) %in% input.names)],df[,which(colnames(df) %in% output.names)],
              RTS = "crs", ORIENTATION = "out", SLACK = TRUE)

###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
#TEST THE SINGLE INPUT SINGLE OUTPUT EXAMPLE
x <- matrix(c(100,200,300,500,100,200,600),ncol=1)
y <- matrix(c(75,100,300,400,25,50,400),ncol=1)
dea.plot.frontier(x,y,txt=1:dim(x)[1])

data <- data.frame(x=x,y=y)

dea.out(data,input.names="x",output.names="y",rts='crs',slack=F)
dea(x,y,RTS='crs',SLACK=F)

dea.out(data,input.names="x",output.names="y",rts='vrs',slack=T)
dea(x,y,ORIENTATION='out',RTS='vrs',SLACK=T)$sum

dea.out(data,input.names="x",output.names="y",rts='crs',slack=T)
dea(x,y,ORIENTATION='out',RTS='crs',SLACK=T)$sum

#####################################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################
###############################################################################################################



